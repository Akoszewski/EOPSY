#!/bin/bash

function check_case ()
{
    if [ "$1" == "-l" ]
    then
        case="lowercase"
    elif [ "$1" == "-u" ]
    then
        case="uppercase"
    elif [ -z $1 ]
    then
        error "Not enough arguments"
    else
        pattern="$1"
    fi
}

function error ()
{
    if [ -z "$1" ]
    then
        echo "Bad parameter"
    else
        echo $1
    fi
    print_help
}

function print_help ()
{
    echo "Usage:"
    echo "modify [-r] [-l|-u] <dir/file names...>"
    echo "modify [-r] <sed pattern> <dir/file names...>"
    echo "modify [-h]"
    exit
}

recursive="false"
if [ "$1" == "-h" ]
then
    print_help
fi
if [ "$1" == "-r" ]
then
    recursive="true"
    shift
else
    recursive="false"
fi
check_case "$1"
shift
if [ -z "$1" ]
then
    error "You need to provide at last one filename"
else
    for filename in "$@"
    do
        echo "$filename"
        if [ "$pattern" != "" ]
        then
            mv "$filename" "`echo $filename | sed $pattern`"
            exit
        fi
        if [ "$case" == "uppercase" ]
        then
            mv "$filename" "${filename^}"
        else
            mv "$filename" "${filename,}"
        fi

    done
fi

echo "recursive: $recursive"
echo "case: $case"
echo "pattern: $pattern"
echo "filenames: $filenames"
